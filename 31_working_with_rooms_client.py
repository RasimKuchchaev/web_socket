import socketio
import time

# –°–æ–∑–¥–∞–µ–º –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
sio = socketio.Client()

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
@sio.event
def connect():
    print("–£—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ —Å–µ—Ä–≤–µ—Ä—É")

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
@sio.on('message')
def on_message(data):
    print(f"–ü–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞: {data}")

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
print("üîå –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É...")
sio.connect('http://0.0.0.0:80')

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π
print("–û—Ç–ø—Ä–∞–≤–ª—è–µ–º join_lobby")
sio.emit("join_lobby", {"text": "hello"})

print("–û—Ç–ø—Ä–∞–≤–ª—è–µ–º get_rooms")
sio.emit("get_rooms", {"text": "hello"})

print("–û—Ç–ø—Ä–∞–≤–ª—è–µ–º br–æadcast_lobby")
sio.emit("br–æadcast_lobby", {"text": "hello"})

# –£–¥–µ—Ä–∂–∏–≤–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
try:
    while True:
        time.sleep(1)
except KeyboardInterrupt:
    print("–û—Ç–∫–ª—é—á–∞–µ–º—Å—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞...")
    sio.disconnect()


